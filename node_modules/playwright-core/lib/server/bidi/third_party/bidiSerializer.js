"use strict";
<<<<<<< HEAD
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var bidiSerializer_exports = {};
__export(bidiSerializer_exports, {
  BidiSerializer: () => BidiSerializer,
  isDate: () => isDate,
  isPlainObject: () => isPlainObject,
  isRegExp: () => isRegExp
});
module.exports = __toCommonJS(bidiSerializer_exports);
=======

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isRegExp = exports.isPlainObject = exports.isDate = exports.BidiSerializer = void 0;
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
/**
 * @license
 * Copyright 2024 Google Inc.
 * Modifications copyright (c) Microsoft Corporation.
 * SPDX-License-Identifier: Apache-2.0
 */
<<<<<<< HEAD
class UnserializableError extends Error {
}
class BidiSerializer {
  static serialize(arg) {
    switch (typeof arg) {
      case "symbol":
      case "function":
        throw new UnserializableError(`Unable to serializable ${typeof arg}`);
      case "object":
        return BidiSerializer._serializeObject(arg);
      case "undefined":
        return {
          type: "undefined"
        };
      case "number":
        return BidiSerializer._serializeNumber(arg);
      case "bigint":
        return {
          type: "bigint",
          value: arg.toString()
        };
      case "string":
        return {
          type: "string",
          value: arg
        };
      case "boolean":
        return {
          type: "boolean",
=======

/* eslint-disable curly, indent */

/**
 * @internal
 */
class UnserializableError extends Error {}

/**
 * @internal
 */
class BidiSerializer {
  static serialize(arg) {
    switch (typeof arg) {
      case 'symbol':
      case 'function':
        throw new UnserializableError(`Unable to serializable ${typeof arg}`);
      case 'object':
        return BidiSerializer._serializeObject(arg);
      case 'undefined':
        return {
          type: 'undefined'
        };
      case 'number':
        return BidiSerializer._serializeNumber(arg);
      case 'bigint':
        return {
          type: 'bigint',
          value: arg.toString()
        };
      case 'string':
        return {
          type: 'string',
          value: arg
        };
      case 'boolean':
        return {
          type: 'boolean',
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
          value: arg
        };
    }
  }
  static _serializeNumber(arg) {
    let value;
    if (Object.is(arg, -0)) {
<<<<<<< HEAD
      value = "-0";
    } else if (Object.is(arg, Infinity)) {
      value = "Infinity";
    } else if (Object.is(arg, -Infinity)) {
      value = "-Infinity";
    } else if (Object.is(arg, NaN)) {
      value = "NaN";
=======
      value = '-0';
    } else if (Object.is(arg, Infinity)) {
      value = 'Infinity';
    } else if (Object.is(arg, -Infinity)) {
      value = '-Infinity';
    } else if (Object.is(arg, NaN)) {
      value = 'NaN';
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
    } else {
      value = arg;
    }
    return {
<<<<<<< HEAD
      type: "number",
=======
      type: 'number',
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
      value
    };
  }
  static _serializeObject(arg) {
    if (arg === null) {
      return {
<<<<<<< HEAD
        type: "null"
      };
    } else if (Array.isArray(arg)) {
      const parsedArray = arg.map((subArg) => {
        return BidiSerializer.serialize(subArg);
      });
      return {
        type: "array",
=======
        type: 'null'
      };
    } else if (Array.isArray(arg)) {
      const parsedArray = arg.map(subArg => {
        return BidiSerializer.serialize(subArg);
      });
      return {
        type: 'array',
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
        value: parsedArray
      };
    } else if (isPlainObject(arg)) {
      try {
        JSON.stringify(arg);
      } catch (error) {
<<<<<<< HEAD
        if (error instanceof TypeError && error.message.startsWith("Converting circular structure to JSON")) {
          error.message += " Recursive objects are not allowed.";
=======
        if (error instanceof TypeError && error.message.startsWith('Converting circular structure to JSON')) {
          error.message += ' Recursive objects are not allowed.';
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
        }
        throw error;
      }
      const parsedObject = [];
      for (const key in arg) {
        parsedObject.push([BidiSerializer.serialize(key), BidiSerializer.serialize(arg[key])]);
      }
      return {
<<<<<<< HEAD
        type: "object",
=======
        type: 'object',
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
        value: parsedObject
      };
    } else if (isRegExp(arg)) {
      return {
<<<<<<< HEAD
        type: "regexp",
=======
        type: 'regexp',
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
        value: {
          pattern: arg.source,
          flags: arg.flags
        }
      };
    } else if (isDate(arg)) {
      return {
<<<<<<< HEAD
        type: "date",
        value: arg.toISOString()
      };
    }
    throw new UnserializableError(
      "Custom object serialization not possible. Use plain objects instead."
    );
  }
}
const isPlainObject = (obj) => {
  return typeof obj === "object" && obj?.constructor === Object;
};
const isRegExp = (obj) => {
  return typeof obj === "object" && obj?.constructor === RegExp;
};
const isDate = (obj) => {
  return typeof obj === "object" && obj?.constructor === Date;
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  BidiSerializer,
  isDate,
  isPlainObject,
  isRegExp
});
=======
        type: 'date',
        value: arg.toISOString()
      };
    }
    throw new UnserializableError('Custom object serialization not possible. Use plain objects instead.');
  }
}

/**
 * @internal
 */
exports.BidiSerializer = BidiSerializer;
const isPlainObject = obj => {
  return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === Object;
};

/**
 * @internal
 */
exports.isPlainObject = isPlainObject;
const isRegExp = obj => {
  return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === RegExp;
};

/**
 * @internal
 */
exports.isRegExp = isRegExp;
const isDate = obj => {
  return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === Date;
};
exports.isDate = isDate;
>>>>>>> 0bbb606fffa4286e884fc3bf9391c67f4bdb0fbb
